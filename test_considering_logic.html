<!DOCTYPE html>
<html>
<head>
    <title>Test Considering Schools Logic</title>
</head>
<body>
    <h1>Testing Considering Schools Logic</h1>
    <div id="results"></div>

    <script>
        // Copy the function from sidebar.js for testing
        function checkCurrentSchoolInConsidering(considering, currentTeamId) {
            if (!considering || considering === 'undecided' || !currentTeamId) {
                return 'not_included';
            }

            // Extract all school IDs from the considering text
            // Pattern: digits followed by space and parentheses with school name
            const schoolIdMatches = considering.match(/\b\d{5}\b/g);
            
            if (!schoolIdMatches) {
                return 'not_included';
            }

            const isCurrentSchoolIncluded = schoolIdMatches.includes(currentTeamId);
            
            if (!isCurrentSchoolIncluded) {
                return 'not_included';
            }
            
            // Debug logging for development
            console.log(`School ${currentTeamId} found in considering: ${considering} (${schoolIdMatches.length} total schools)`);
            
            // If current school is included, check if it's the only one
            if (schoolIdMatches.length === 1) {
                return 'only';
            } else {
                return 'included';
            }
        }

        // Test cases from the user's examples
        const testCases = [
            {
                considering: "54006 (Howard Payne University), 54448 (Greensboro College), 54456 (Westminster College (Missouri))",
                currentTeamId: "54006",
                expected: "included"
            },
            {
                considering: "Undecided",
                currentTeamId: "54006",
                expected: "not_included"
            },
            {
                considering: "54431 (Hanover College)",
                currentTeamId: "54431",
                expected: "only"
            },
            {
                considering: "54431 (Hanover College), 54006 (Howard Payne University)",
                currentTeamId: "54431",
                expected: "included"
            },
            {
                considering: "54431 (Hanover College), 54006 (Howard Payne University)",
                currentTeamId: "54006",
                expected: "included"
            },
            {
                considering: "54431 (Hanover College), 54006 (Howard Payne University)",
                currentTeamId: "99999",
                expected: "not_included"
            }
        ];

        let resultsHtml = "<h2>Test Results:</h2>";
        
        testCases.forEach((test, index) => {
            const result = checkCurrentSchoolInConsidering(test.considering, test.currentTeamId);
            const passed = result === test.expected;
            
            resultsHtml += `
                <div style="margin: 10px 0; padding: 10px; border: 1px solid ${passed ? 'green' : 'red'}; background: ${passed ? '#d4edda' : '#f8d7da'};">
                    <strong>Test ${index + 1}: ${passed ? 'PASS' : 'FAIL'}</strong><br>
                    Considering: "${test.considering}"<br>
                    Current Team ID: "${test.currentTeamId}"<br>
                    Expected: "${test.expected}"<br>
                    Got: "${result}"
                </div>
            `;
        });

        document.getElementById('results').innerHTML = resultsHtml;
    </script>
</body>
</html>
